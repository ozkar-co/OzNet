<article>
    <header>
        <h1>Configuraci√≥n de OzNet</h1>
        <p>Gu√≠a completa para configurar tu conexi√≥n a la red privada</p>
    </header>

    <section>
        <h2>Requisitos Previos</h2>
        <ul>
            <li>ZeroTier One instalado en tu dispositivo</li>
            <li>Acceso de administrador para configurar DNS</li>
            <li>Network ID: <code>{{networkId}}</code></li>
        </ul>
    </section>

    <section>
        <h2>Paso 1: Instalar ZeroTier</h2>
        
        <h3>Linux (Ubuntu/Debian)</h3>
        <pre><code>curl -s 'https://raw.githubusercontent.com/zerotier/ZeroTierOne/master/doc/contact%40zerotier.com.gpg' | gpg --import && \
if z=$(curl -s 'https://install.zerotier.com/' | gpg); then echo "$z" | sudo bash; fi</code></pre>

        <h3>Windows</h3>
        <p>Descarga e instala desde: <a href="https://www.zerotier.com/download/" target="_blank">https://www.zerotier.com/download/</a></p>

        <h3>macOS</h3>
        <p>Descarga e instala desde: <a href="https://www.zerotier.com/download/" target="_blank">https://www.zerotier.com/download/</a></p>
    </section>

    <section>
        <h2>Paso 2: Unirse a la Red</h2>
        <ol>
            <li>Abre ZeroTier One</li>
            <li>Haz clic en "Join Network"</li>
            <li>Ingresa el Network ID: <code>{{networkId}}</code></li>
            <li>Espera la autorizaci√≥n del administrador</li>
        </ol>
    </section>

    <section>
        <h2>Paso 3: Configurar DNS</h2>
        
        <h3>Configuraci√≥n del Servidor DNS</h3>
        <p>El servidor principal de OzNet act√∫a como DNS para todos los servicios. Necesitas configurar tu sistema para usar este DNS.</p>

        <h4>Linux</h4>
        <p>Edita <code>/etc/resolv.conf</code> o configura NetworkManager:</p>
        <pre><code># Agregar al final de /etc/resolv.conf
nameserver {{serverIp}}</code></pre>

        <h4>Windows</h4>
        <ol>
            <li>Abre Configuraci√≥n de Red</li>
            <li>Selecciona tu adaptador de red</li>
            <li>Propiedades ‚Üí Protocolo Internet versi√≥n 4 (TCP/IPv4)</li>
            <li>Usar las siguientes direcciones DNS: <code>{{serverIp}}</code></li>
        </ol>

        <h4>macOS</h4>
        <ol>
            <li>Preferencias del Sistema ‚Üí Red</li>
            <li>Selecciona tu conexi√≥n de red</li>
            <li>Avanzado ‚Üí DNS</li>
            <li>Agrega: <code>{{serverIp}}</code></li>
        </ol>
    </section>

    <section>
        <h2>Paso 4: Instalar Certificado SSL (Opcional pero Recomendado)</h2>
        
        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è Importante:</strong> Sin el certificado SSL, ver√°s advertencias de seguridad en el navegador.
        </div>

        <h3>Descargar el Certificado</h3>
        <p>El certificado CA de OzNet est√° disponible en el servidor. Puedes descargarlo de una de estas formas:</p>
        
        <h4>Opci√≥n A: Descarga Directa</h4>
        <p>Si ya tienes acceso a la red, descarga desde:</p>
        <pre><code># Linux/macOS
wget https://{{serverIp}}/certs/oznet-ca.crt

# O usando curl
curl -k -o oznet-ca.crt https://{{serverIp}}/certs/oznet-ca.crt</code></pre>

        <h4>Opci√≥n B: Copia desde el Servidor</h4>
        <pre><code># Si tienes acceso SSH al servidor
scp usuario@{{serverIp}}:/var/oznet/certs/oznet-ca.crt ./</code></pre>

        <h3>Instalar el Certificado</h3>
        
        <h4>Linux (Ubuntu/Debian)</h4>
        <pre><code>sudo cp oznet-ca.crt /usr/local/share/ca-certificates/
sudo update-ca-certificates</code></pre>

        <h4>Linux (RHEL/CentOS/Fedora)</h4>
        <pre><code>sudo cp oznet-ca.crt /etc/pki/ca-trust/source/anchors/
sudo update-ca-trust</code></pre>

        <h4>macOS</h4>
        <pre><code>sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain oznet-ca.crt</code></pre>

        <h4>Windows</h4>
        <ol>
            <li>Haz doble clic en el archivo <code>oznet-ca.crt</code></li>
            <li>Haz clic en "Instalar certificado"</li>
            <li>Selecciona "M√°quina local"</li>
            <li>Selecciona "Colocar todos los certificados en el siguiente almac√©n"</li>
            <li>Haz clic en "Examinar" y selecciona "Entidades de certificaci√≥n ra√≠z de confianza"</li>
            <li>Haz clic en "Aceptar" y "Siguiente"</li>
        </ol>

        <div class="alert alert-info">
            <strong>üí° Nota:</strong> Despu√©s de instalar el certificado, reinicia tu navegador para que los cambios surtan efecto.
        </div>
    </section>

    <section>
        <h2>Paso 5: Verificar Conexi√≥n</h2>
        <p>Una vez configurado, deber√≠as poder acceder a:</p>
        <ul>
            <li><a href="https://home.oznet">https://home.oznet</a> - Esta p√°gina (con SSL)</li>
            <li><a href="https://hub.oznet">https://hub.oznet</a> - Gesti√≥n de servicios</li>
            <li><a href="https://files.oznet">https://files.oznet</a> - Servidor de archivos</li>
            <li><a href="https://server.oznet">https://server.oznet</a> - Servidor principal</li>
        </ul>
        
        <div class="alert alert-success">
            <strong>‚úÖ Verificaci√≥n:</strong> Si ves un candado verde en la barra de direcciones, el certificado SSL est√° funcionando correctamente.
        </div>
    </section>

    <section>
        <h2>Soluci√≥n de Problemas</h2>
        
        <h3>No puedo acceder a los servicios</h3>
        <ul>
            <li>Verifica que ZeroTier est√© conectado</li>
            <li>Confirma que el DNS est√© configurado correctamente</li>
            <li>Prueba hacer ping a <code>{{serverIp}}</code></li>
        </ul>

        <h3>DNS no funciona</h3>
        <ul>
            <li>Reinicia el servicio de red</li>
            <li>Limpia la cach√© DNS: <code>sudo systemctl restart systemd-resolved</code></li>
            <li>En Windows: <code>ipconfig /flushdns</code></li>
        </ul>

        <h3>Advertencias de seguridad en el navegador</h3>
        <ul>
            <li>Aseg√∫rate de haber instalado el certificado SSL correctamente</li>
            <li>Reinicia el navegador despu√©s de instalar el certificado</li>
            <li>Verifica que el certificado est√© en el almac√©n correcto</li>
            <li>Como alternativa temporal, puedes hacer clic en "Avanzado" y "Continuar"</li>
        </ul>

        <h3>El certificado no se instala</h3>
        <ul>
            <li>Verifica que tengas permisos de administrador</li>
            <li>En Windows, ejecuta el instalador como administrador</li>
            <li>En Linux, usa <code>sudo</code> para los comandos</li>
        </ul>
    </section>

    <section>
        <h2>Informaci√≥n T√©cnica</h2>
        <div class="grid">
            <div>
                <h4>Network ID</h4>
                <code>{{networkId}}</code>
            </div>
            <div>
                <h4>Nombre de la Red</h4>
                <p>{{networkName}}</p>
            </div>
            <div>
                <h4>Servidor DNS</h4>
                <code>{{serverIp}}</code>
            </div>
            <div>
                <h4>Rango de IPs</h4>
                <code>172.26.0.0/24</code>
            </div>
            <div>
                <h4>Certificado SSL</h4>
                <p>CA: OzNet Root CA</p>
            </div>
            <div>
                <h4>Puertos</h4>
                <p>HTTP: 80, HTTPS: 443, DNS: 53</p>
            </div>
        </div>
    </section>

    <section>
        <h2>Comandos √ötiles</h2>
        <div class="grid">
            <div>
                <h4>Verificar conexi√≥n ZeroTier</h4>
                <pre><code>zerotier-cli status</code></pre>
            </div>
            <div>
                <h4>Probar DNS</h4>
                <pre><code>nslookup home.oznet {{serverIp}}</code></pre>
            </div>
            <div>
                <h4>Probar conectividad</h4>
                <pre><code>ping {{serverIp}}</code></pre>
            </div>
            <div>
                <h4>Ver certificados instalados</h4>
                <pre><code># Linux
ls /usr/local/share/ca-certificates/

# macOS
security find-certificate -a -c "OzNet"</code></pre>
            </div>
        </div>
    </section>
</article> 